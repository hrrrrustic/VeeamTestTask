1. Верю, что очередь не до конца синхронизирована. Если что, это была попытка сделать аналог BlockingCollection<T>
с ограниченным внутри элементов внутри.
2. Есть ощущение, что OperationContext немного кривовато сделан :(
3. Ограничиваю максимально допустимый размер считанной части файла числом 300М. Не знаю как сделать лучше.
Но 300 метров будет на любой машине. Была еще идея перед стартом смотреть кол-во свободной оперативы и брать это число. 